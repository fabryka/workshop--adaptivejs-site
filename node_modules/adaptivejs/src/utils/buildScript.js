define(['adaptivejs/utils/general'], function(adaptiveUtils) {
    /**
     *  Grabs the location of the build script for re-injection into templates
     */
    var cachedBuildScript;
    var getBuildScript = function() {
        try {
            // Find an adaptive build script
            if (!cachedBuildScript) {
                var libs = adaptiveUtils.getAdaptiveLibs();

                // In 2.0 and greater, the assumption is that the project uses
                // a boot loader which is loaded by the Mobify tag. This boot
                // loader always injects a build script named 'adaptation'
                cachedBuildScript = libs.adaptation;
            }

            return cachedBuildScript;
        } catch (e) {
            console.error('Couldn\'t determine adaptivejs build file used. The mobify-tag may be placed incorrectly.');
        }
    };

    return getBuildScript;
});
